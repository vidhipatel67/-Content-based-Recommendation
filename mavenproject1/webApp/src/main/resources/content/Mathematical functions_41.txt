<p>Notice that in the expression starting with <code>if ((D == 0)</code>, I have to use OR instead of the <code>||</code> because of a bug in the source template.</p>